title: tmp
icon: mdi:cellphone-iphone
# Optional background (overwrites the global background).
background: center / cover no-repeat url("/local/latitude33.jpg") fixed
#background: "right/auto linear-gradient(23deg, rgba(211,211,211,1) 0%, rgba(223,223,223,1) 34%, rgba(255,255,255,1) 100%)"
panel: true
cards:
  - type: custom:layout-card
    column_num: 1
    max_columns: 1
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:decluttering-card
            template: nest_picture_button
            variables:
              - entity: person.nic
              - entity_picture: /local/nic_ha.jpg
          - type: custom:decluttering-card
            template: nest_picture_button
            variables:
              - entity: person.ulli
              - entity_picture: /local/ulli_ha_sq.png
          - type: custom:decluttering-card
            template: nest_button
            variables:
              - entity: alarm_control_panel.ha_alarm
              - state:
                  - value: 'armed_away'
                    icon: mdi:shield-lock
                    color: rgb(152,251,152)
                  - value: 'armed_home'
                    icon: mdi:shield-home
                    color: rgb(251, 210, 41)
                  - value: 'triggered'
                    icon: mdi:shield-alert
                    color: rgb(255, 0, 0)
                    styles:
                      icon:
                        - animation: blink 2s ease infinite
                  - value: 'disarmed'
                    icon: mdi:shield-off
                    color: rgb(169,169,169)
                  - value: 'pending'
                    icon: mdi:shield-half-full
                    color: rgb(169,169,169)
                    styles:
                      icon:
                        - animation: blink 2s ease infinite
      
      
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                style: |
                  ha-card {
                    border-radius: 30px;
                    margin-top: 10px;
                    padding-top: 10px;
                    margin-bottom: 10px;
                  }
                cards:
                  - type: "custom:button-card"
                    name:  Fan
                    color_type: icon
                    size: 25%
                    entity: fan.livingroom_ceiling_fan
                    show_label: true
                    label: >
                      [[[
                      return (states['input_boolean.fan_state_livingroom'].state === 'on'
                        ? 'Speed ' + states['input_select.fan_speed_livingroom'].state
                        : '');
                      ]]]
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: call-service
                      service: script.turn_on
                      service_data:
                        entity_id: script.fan_increase_speed
                        variables:
                          room: 'livingroom'
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - height: 90px
                      label:
                        - font-size: 11px
                        - padding: 0px 5px

                  - type: "custom:button-card"
                    color_type: icon
                    entity: switch.espresso
                    show_label: true
                    show_last_changed: true
                    styles:
                      card:
                        - height: 90px
                      label:
                        - font-size: 11px
                        - padding: 0px 5px
                    state:
                      - value: 'on'
                        styles:
                          state:
                            - color: green


      - type: custom:vertical-stack-in-card
        cards:
          - type: horizontal-stack
            style: |
              ha-card {
                border-radius: 30px;
                margin-top: 10px;
                padding-top: 10px;
                margin-bottom: 10px;
              }
            cards:
              - type: "custom:button-card"
                color_type: icon
                entity: switch.media_unit
                name: TV
                size: 25%
                show_label: true
                show_last_changed: false
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                styles:
                  card:
                    - height: 90px
                  label:
                    - font-size: 11px
                    - padding: 0px 5px
              - type: "custom:button-card"
                color_type: icon
                name: TV mood
                entity: light.tv
                size: 25%
                show_label: true
                show_last_changed: false
                tap_action:
                  action: toggle
                double_tap_action:  
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.movie_lighting
                hold_action:
                  action: more-info
                styles:
                  card:
                    - height: 90px
                  label:
                    - font-size: 11px
                    - padding: 0px 5px
              - type: "custom:button-card"
                color_type: icon
                name: All Lights
                entity: light.master_switch
                show_label: true
                show_last_changed: false
                styles:
                  card:
                    - height: 90px
                  label:
                    - font-size: 11px
                    - padding: 0px 5px

              

          - type: custom:vertical-stack-in-card
            cards:
              - type: markdown
                content: >
                  #### Living & Dining room
                #cards:
              - type: custom:fold-entity-row
                head:
                  type: custom:slider-entity-row
                  entity: light.living_ceiling_lights
                  toggle: true
                  name: Living
                group_config:
                  type: custom:slider-entity-row
                items:
                  - entity: light.lifx_livingroom1
                    name: Living TV
                  - entity: light.lifx_livingroom2
                    name: Living

              - type: custom:fold-entity-row
                head:
                  type: custom:slider-entity-row
                  entity:  light.dining_lights
                  toggle: true
                  name: Dining
                  #full_row: true
                group_config:
                  type: custom:slider-entity-row
                items:
                  - entity: light.lifx_dining1
                    name: Dining
                  - entity: light.lifx_dining2
                    name: Dining Sofa





              - type: horizontal-stack
                cards:
                  - type: custom:decluttering-card
                    template: nest_icon_button
                    variables:
                      - entity: light.lifx_livingroom1
                      - name: Living TV
                  - type: custom:decluttering-card
                    template: nest_icon_button
                    variables:
                      - entity: light.lifx_livingroom2
                      - name: Living
                  - type: custom:decluttering-card
                    template: nest_icon_button
                    variables:
                      - entity: light.lifx_dining1
                      - name: Dining TV
                  - type: custom:decluttering-card
                    template: nest_icon_button
                    variables:
                      - entity: light.lifx_dining2
                      - name: Dining



      - type: custom:vertical-stack-in-card
        cards:
          - type: markdown
            content: >
              #### Kitchen
          - type: custom:slider-entity-row
            entity: light.kitchen_ceiling
            toggle: true
            full_row: true
            name: Kitchen
          - type: horizontal-stack
            cards:
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.led
                  - name: LED
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.led_shelf
                  - name: Shelf
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.lifx_kitchen1
                  - name: Stove
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.lifx_kitchen2
                  - name: Fridge


      #Bedroom
      - type: custom:vertical-stack-in-card
        id: a14854230982034802834nlsdnf324
        cards:
          - type: markdown
            content: >
              #### Bedroom

          - type: custom:slider-entity-row
            entity: light.bedroom_ceiling
            toggle: true
            full_row: true
            name: Bedroom Ceiling
          - type: horizontal-stack
            cards:
              
              - type: "custom:button-card"
                name: Fan
                #layout: icon_state_name2nd
                color_type: icon
                entity: fan.bedroom_ceiling_fan
                show_label: true
                label: >
                  [[[
                  return (states['input_boolean.fan_state_bedroom'].state === 'on'
                    ? 'Speed ' + states['input_select.fan_speed_bedroom'].state
                    : '');
                  ]]]
                tap_action:
                  action: toggle
                double_tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.fan_increase_speed
                    variables:
                      room: 'bedroom'
                hold_action:
                  action: more-info
                styles:
                  card:
                    - height: 70px
                  label:
                    - font-size: 12px
                    - padding: 0px 5px
              - type: entity-button
                entity: light.bedroom
                name: Nightstand
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
              - type: entity-button
                entity: light.desk
                name: Desk
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
              - type: entity-button
                entity: light.lifx_bedroom1
                name: Desk ceiling
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
              - type: entity-button
                entity: light.lifx_bedroom2
                name: Nics ceiling
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info

      - type: custom:vertical-stack-in-card
        cards:
          - type: markdown
            content: >
              #### Other
          - type: horizontal-stack
            cards:
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.lifx_hallway_1
                  - name: Hallway
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.lifx_laundry
                  - name: Laundry
              - type: custom:decluttering-card
                template: nest_icon_button
                variables:
                  - entity: light.balcony_ceiling
                  - name: Balcony

      - type: thermostat
        entity: climate.livingroom_ac

      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                - type: custom:swipe-card
                  parameters:
                    effect: coverflow
                  cards:
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_temperature_kitchen
                      name: Kitchen
                      height: 35
                      points_per_hour: 1
                      animate: true
                      color_thresholds:
                        - color: '#00a1ff'
                          value: 0
                        - color: '#abe673'
                          value: 21
                        - color: '#fe9c67'
                          value: 23.5
                        - color: '#e0614c'
                          value: 24.5
                      show:
                        fill: false
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_humidity_kitchen
                      name: Kitchen Humidity
                      height: 35
                      line_color: blue
                      points_per_hour: 1
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_illumination_kitchen
                      name: Kitchen Light
                      height: 35
                      line_color: yellow
                      points_per_hour: 1
                - type: custom:swipe-card
                  parameters:
                    effect: coverflow
                  cards:
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_temperature_bedroom
                      name: Bedroom
                      height: 35
                      points_per_hour: 1
                      animate: true
                      color_thresholds:
                        - color: '#00a1ff'
                          value: 0
                        - color: '#abe673'
                          value: 21
                        - color: '#fe9c67'
                          value: 23.5
                        - color: '#e0614c'
                          value: 24.5
                      show:
                        fill: false
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_humidity_bedroom
                      name: Humidity
                      height: 35
                      line_color: blue
                      points_per_hour: 1
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_illumination_bedroom
                      name: Light
                      height: 35
                      line_color: yellow
                      points_per_hour: 1
              - type: horizontal-stack
                cards:
                - type: custom:swipe-card
                  parameters:
                    effect: coverflow
                  cards:
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_temperature_balcony
                      name: Balcony
                      height: 35
                      points_per_hour: 1
                      animate: true
                      color_thresholds:
                        - color: '#00a1ff'
                          value: 0
                        - color: '#abe673'
                          value: 21
                        - color: '#fe9c67'
                          value: 23.5
                        - color: '#e0614c'
                          value: 24.5
                      show:
                        fill: false
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_humidity_balcony
                      name: Humidity
                      height: 35
                      line_color: blue
                      points_per_hour: 1
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_pressure_balcony
                      name: Pressure
                      height: 35
                      line_color: yellow
                      points_per_hour: 1
                - type: custom:swipe-card
                  parameters:
                    effect: coverflow
                  cards:
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_temperature_nursery
                      name: Nursery
                      height: 35
                      points_per_hour: 1
                      color_thresholds:
                        - value: 0
                          color: "#CCE5FF"
                        - value: 10
                          color: "#66B2FF"
                        - value: 15
                          color: "#0080FF"
                        - value: 18
                          color: "#87c087"
                        - value: 21
                          color: "#389638"
                        - value: 24
                          color: "#FF9932"
                        - value: 25
                          color: "#FF8000"
                        - value: 26
                          color: "#ff0000"
                      show:
                        fill: false
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_humidity_nursery
                      name: Humidity
                      height: 35
                      points_per_hour: 1
                      line_color: blue
                    - type: custom:mini-graph-card
                      entities:
                        - sensor.lumi_illumination_nursery
                      name: Light
                      height: 35
                      points_per_hour: 1
                      line_color: yellow

      # Sensors
      - type: custom:vertical-stack-in-card
        cards:
          - type: horizontal-stack
            cards:
              - type: entity-button
                entity: vacuum.bibop
                secondary_info: last_changed
          - type: divider
          - type: horizontal-stack
            cards:
              - type: "custom:button-card"
                template: motion
                entity: binary_sensor.lumi_motion_livingroom
                name: Livingroom
              - type: "custom:button-card"
                template: motion
                entity: binary_sensor.motion_sensor_158_kitchen
                name: Kitchen
              - type: "custom:button-card"
                template: motion
                entity: binary_sensor.lumi_motion_bedroom
                name: Bedroom
              - type: "custom:button-card"
                template: motion
                entity: binary_sensor.lumi_motion_nursery
                name: Nursery
              - type: "custom:button-card"
                template: motion
                entity: binary_sensor.lumi_motion_laundry
                name: Laundry
          - type: divider
            name: Doors
          - type: horizontal-stack
            cards:
              - type: "custom:button-card"
                template: door
                entity: binary_sensor.lumi_door_livingroom_balcony
                name: Balcony L'room
              - type: "custom:button-card"
                template: door
                entity: binary_sensor.lumi_door_nursery_balcony
                name: Balcony N'sery
              - type: "custom:button-card"
                template: door
                entity: binary_sensor.lumi_door_entrance
                name: Entrance
              - type: "custom:button-card"
                template: door
                name: Nursery
                entity: binary_sensor.lumi_door_nursery
              - type: "custom:button-card"
                template: door
                entity: binary_sensor.lumi_door_laundry
                name: Laundry
          - type: divider
            name: Occupancy
          - type: horizontal-stack
            cards:
              - type: "custom:button-card"
                template: occupancy
                name: Livingroom
                entity: binary_sensor.lumi_occupancy_livingroom
              - type: "custom:button-card"
                template: occupancy
                entity: binary_sensor.lumi_occupancy_kitchen
                name: Kitchen
              - type: "custom:button-card"
                template: occupancy
                entity: binary_sensor.lumi_occupancy_bedroom
                name: Bedroom
              - type: "custom:button-card"
                template: occupancy
                entity: binary_sensor.lumi_occupancy_nursery
                name: Nursery
              - type: "custom:button-card"
                template: occupancy
                entity: binary_sensor.lumi_occupancy_laundry
                name: Laundry
