title: Nest
icon: mdi:monitor-dashboard
panel: true
background: "right/auto linear-gradient(23deg, rgba(211,211,211,1) 0%, rgba(223,223,223,1) 34%, rgba(255,255,255,1) 100%)"
path: home-dash
cards:
  - type: vertical-stack
    cards:
      - type: custom:layout-card
        layout: horizontal
        #max_width: [20%, 100%]
        column_num: 1
        max_columns: 3
        cards:
          - type: vertical-stack
            cards:
              
              - type: horizontal-stack
                cards:
                  - type: custom:decluttering-card
                    template: nest_picture_button
                    variables:
                      - entity: person.nic
                      - entity_picture: /local/nic_ha.jpg
                  - type: custom:decluttering-card
                    template: nest_button
                    variables:
                      - entity: alarm_control_panel.ha_alarm
                      - state:
                          - value: 'armed_away'
                            icon: mdi:shield-lock
                            color: rgb(152,251,152)
                          - value: 'armed_home'
                            icon: mdi:shield-home
                            color: rgb(251, 210, 41)
                          - value: 'triggered'
                            icon: mdi:shield-alert
                            color: rgb(255, 0, 0)
                            styles:
                              icon:
                                - animation: blink 2s ease infinite
                          - value: 'disarmed'
                            icon: mdi:shield-off
                            color: rgb(169,169,169)
                          - value: 'pending'
                            icon: mdi:shield-half-full
                            color: rgb(169,169,169)
                            styles:
                              icon:
                                - animation: blink 2s ease infinite
                  - type: conditional
                    conditions:
                      - entity: input_boolean.guest_mode
                        state: "on"
                    card:
                      type: custom:decluttering-card
                      template: nest_picture_button
                      variables:
                        - entity: input_boolean.guest_mode
                        - entity_picture: /local/guest.png
                  - type: custom:decluttering-card
                    template: nest_picture_button
                    variables:
                      - entity: person.ulli
                      - entity_picture: /local/ulli_ha_sq.png
              - type: custom:weather-card
                entity: weather.dark_sky
                current: true
                details: true
                forecast: true
                style: |
                  ha-card {
                    background-color: rgba(0, 0, 0, 0);
                    -webkit-box-shadow: none;
                    -moz-box-shadow: none;
                    box-shadow: none;
                  }

          - type: vertical-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        name:  Fan
                        color_type: icon
                        size: 25%
                        entity: fan.livingroom_ceiling_fan
                        show_label: true
                        label: >
                          [[[
                          return (states['input_boolean.fan_state_livingroom'].state === 'on'
                            ? 'Speed ' + states['input_select.fan_speed_livingroom'].state
                            : '');
                          ]]]
                        tap_action:
                          action: toggle
                        double_tap_action:
                          action: call-service
                          service: script.turn_on
                          service_data:
                            entity_id: script.fan_increase_speed
                            variables:
                              room: 'livingroom'
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - height: 90px
                          label:
                            - font-size: 11px
                            - padding: 0px 5px

                      - type: "custom:button-card"
                        color_type: icon
                        entity: switch.media_unit
                        name: TV
                        size: 25%
                        show_label: true
                        show_last_changed: false
                        styles:
                          card:
                            - height: 90px
                          label:
                            - font-size: 11px
                            - padding: 0px 5px

                      - type: "custom:button-card"
                        color_type: icon
                        entity: switch.espresso
                        show_label: true
                        size: 25%
                        show_last_changed: true
                        styles:
                          card:
                            - height: 90px
                          label:
                            - font-size: 11px
                            - padding: 0px 5px
                        state:
                          - value: 'on'
                            styles:
                              state:
                                - color: green
                      - type: "custom:button-card"
                        color_type: icon
                        name: All Lights
                        entity: light.master_switch
                        size: 25%
                        show_label: true
                        show_last_changed: false
                        styles:
                          card:
                            - height: 90px
                          label:
                            - font-size: 11px
                            - padding: 0px 5px

              - type: custom:vertical-stack-in-card
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:slider-entity-row
                        entity:  light.living_ceiling_lights
                        toggle: false
                        full_row: true

                      - type: custom:slider-entity-row
                        entity:  light.dining_lights
                        toggle: false
                        full_row: true
                  - type: horizontal-stack
                    cards:
                      - type: custom:decluttering-card
                        template: nest_icon_button
                        variables:
                          - entity: light.lifx_livingroom1
                          - name: Living TV
                      - type: custom:decluttering-card
                        template: nest_icon_button
                        variables:
                          - entity: light.lifx_livingroom2
                          - name: Living
                      - type: custom:decluttering-card
                        template: nest_icon_button
                        variables:
                          - entity: light.lifx_dining1
                          - name: Dining TV
                      - type: custom:decluttering-card
                        template: nest_icon_button
                        variables:
                          - entity: light.lifx_dining2
                          - name: Dining

              - type: custom:vertical-stack-in-card
                #title: Bedroom
                cards:
                  - type: custom:slider-entity-row
                    entity: light.bedroom_ceiling
                    toggle: false
                    full_row: true
                    name: Bedroom Ceiling

                  - type: horizontal-stack
                    cards:
                      - type: "custom:button-card"
                        name: Fan
                        #layout: icon_state_name2nd
                        color_type: icon
                        entity: fan.bedroom_ceiling_fan
                        show_label: true
                        size: 25%
                        label: >
                          [[[
                          return (states['input_boolean.fan_state_bedroom'].state === 'on'
                            ? 'Speed ' + states['input_select.fan_speed_bedroom'].state
                            : '');
                          ]]]
                        tap_action:
                          action: toggle
                        double_tap_action:
                          action: call-service
                          service: script.turn_on
                          service_data:
                            entity_id: script.fan_increase_speed
                            variables:
                              room: 'bedroom'
                        hold_action:
                          action: more-info
                        styles:
                          card:
                            - height: 70px
                          label:
                            - font-size: 12px
                            - padding: 0px 5px

                      - type: entity-button
                        entity: light.bedroom
                        name: Nightstand
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                      - type: entity-button
                        entity: light.desk
                        name: Desk
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                      - type: entity-button
                        entity: light.lifx_bedroom1
                        name: Desk ceiling
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                      - type: entity-button
                        entity: light.lifx_bedroom2
                        name: Nics ceiling
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info

              - type: horizontal-stack
                cards:
                  - type: custom:vertical-stack-in-card
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.lifx_hallway_1
                              - name: Hallway
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.lifx_laundry
                              - name: Laundry
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.balcony_ceiling
                              - name: Balcony
                  - type: custom:vertical-stack-in-card
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.led
                              - name: LED
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.lifx_kitchen1
                              - name: Stove
                          - type: custom:decluttering-card
                            template: nest_icon_button
                            variables:
                              - entity: light.lifx_kitchen2
                              - name: Fridge


              - type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:simple-thermostat
                        entity: climate.livingroom_ac
                        name: 'Aircon'
                        step_size: 1
                        step_layout: row
                        sensors:
                          - entity: sensor.158_humidity_livingroom
                            name: 'Humidity'
                          # - entity: climate.livingroom_ac
                          #   name: 'State'
                          - entity: sensor.158_temperature_balcony
                            name: 'Outside'
                        control:
                          _names: false
                          hvac: true
                          fan:
                            auto: false
                            night:
                              icon: mdi:sleep
                            low:
                              icon: mdi:numeric-1-box-outline
                            lowMedium: 
                              icon: mdi:numeric-2-box-outline
                            medium:
                              icon: mdi:numeric-3-box-outline
                            mediumHigh:
                              icon: mdi:numeric-4-box-outline
                            high:
                              icon: mdi:numeric-5-box-outline
                            powerful:
                              icon: mdi:file-powerpoint-box-outline
                        style: |
                          ha-card {
                            --st-font-size-xl: 24px;
                            --st-font-size-m: 22px;
                            --st-font-size-title: 20px;
                            --st-spacing: 2px;
                          }

                      - type: vertical-stack
                        cards:
                          - type: custom:swipe-card
                            parameters:
                              effect: coverflow
                            cards:
                              - type: custom:mini-graph-card
                                entities:
                                  - sensor.temperature_158_kitchen
                                  - sensor.158_temperature_bedroom
                                  - sensor.temperature_158_nursery
                                name: Home Climate
                                #height: 35
                                points_per_hour: .5
                                animate: true
                                color_thresholds:
                                  - color: '#00a1ff'
                                    value: 0
                                  - color: '#abe673'
                                    value: 21
                                  - color: '#fe9c67'
                                    value: 23.5
                                  - color: '#e0614c'
                                    value: 24.5
                                style: |
                                  ha-card {
                                    margin-right: 5px;
                                    margin-bottom: 5px;
                                  }
                              - type: custom:mini-graph-card
                                entities:
                                  - sensor.humidity_158_kitchen
                                name: Kitchen Humidity
                                height: 35
                                line_color: blue
                                points_per_hour: 1
                                style: |
                                  ha-card {
                                    margin-right: 5px;
                                    margin-bottom: 5px;
                                  }
                              - type: custom:mini-graph-card
                                entities:
                                  - sensor.illumination_158_kitchen
                                name: Kitchen Light
                                height: 35
                                line_color: yellow
                                points_per_hour: 1
                                style: |
                                  ha-card {
                                    margin-right: 5px;
                                    margin-bottom: 5px;
                                  }
                                


                      # - type: horizontal-stack
                      #   cards:
                      #     - type: vertical-stack
                      #       cards:
                      #         - type: horizontal-stack
                      #           cards:
                      #           - type: custom:swipe-card
                      #             parameters:
                      #               effect: coverflow
                      #             cards:
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.temperature_158_kitchen
                      #                   - sensor.158_temperature_bedroom
                      #                   - sensor.temperature_158_nursery
                      #                 name: Home climate
                      #                 height: 35
                      #                 points_per_hour: 1
                      #                 animate: true
                      #                 color_thresholds:
                      #                   - color: '#00a1ff'
                      #                     value: 0
                      #                   - color: '#abe673'
                      #                     value: 21
                      #                   - color: '#fe9c67'
                      #                     value: 23.5
                      #                   - color: '#e0614c'
                      #                     value: 24.5
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.humidity_158_kitchen
                      #                 name: Kitchen Humidity
                      #                 height: 35
                      #                 line_color: blue
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.illumination_158_kitchen
                      #                 name: Kitchen Light
                      #                 height: 35
                      #                 line_color: yellow
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                                
                      #           - type: custom:swipe-card
                      #             parameters:
                      #               effect: coverflow
                      #             cards:
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_temperature_bedroom
                      #                 name: Bedroom
                      #                 height: 30
                      #                 points_per_hour: 1
                      #                 animate: true
                      #                 color_thresholds:
                      #                   - color: '#00a1ff'
                      #                     value: 0
                      #                   - color: '#abe673'
                      #                     value: 21
                      #                   - color: '#fe9c67'
                      #                     value: 23.5
                      #                   - color: '#e0614c'
                      #                     value: 24.5
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_humidity_bedroom
                      #                 name: Humidity
                      #                 height: 35
                      #                 line_color: blue
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_illumination_bedroom
                      #                 name: Light
                      #                 height: 35
                      #                 line_color: yellow
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #         - type: horizontal-stack
                      #           cards:
                      #           - type: custom:swipe-card
                      #             parameters:
                      #               effect: coverflow
                      #             cards:
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_temperature_balcony
                      #                 name: Balcony
                      #                 height: 35
                      #                 points_per_hour: 1
                      #                 animate: true
                      #                 color_thresholds:
                      #                   - color: '#00a1ff'
                      #                     value: 0
                      #                   - color: '#abe673'
                      #                     value: 21
                      #                   - color: '#fe9c67'
                      #                     value: 23.5
                      #                   - color: '#e0614c'
                      #                     value: 24.5
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_humidity_balcony
                      #                 name: Humidity
                      #                 height: 35
                      #                 line_color: blue
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_pressure_balcony
                      #                 name: Pressure
                      #                 height: 35
                      #                 line_color: yellow
                      #                 points_per_hour: 1
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #           - type: custom:swipe-card
                      #             parameters:
                      #               effect: coverflow
                      #             cards:
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.temperature_158_nursery
                      #                 name: Nursery
                      #                 height: 35
                      #                 points_per_hour: 1
                      #                 color_thresholds:
                      #                   - value: 0
                      #                     color: "#CCE5FF"
                      #                   - value: 10
                      #                     color: "#66B2FF"
                      #                   - value: 15
                      #                     color: "#0080FF"
                      #                   - value: 18
                      #                     color: "#87c087"
                      #                   - value: 21
                      #                     color: "#389638"
                      #                   - value: 24
                      #                     color: "#FF9932"
                      #                   - value: 25
                      #                     color: "#FF8000"
                      #                   - value: 26
                      #                     color: "#ff0000"
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.humidity_158_nursery
                      #                 name: Humidity
                      #                 height: 35
                      #                 points_per_hour: 1
                      #                 line_color: blue
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }
                      #               - type: custom:mini-graph-card
                      #                 entities:
                      #                   - sensor.158_illumination_nursery
                      #                 name: Light
                      #                 height: 35
                      #                 points_per_hour: 1
                      #                 line_color: yellow
                      #                 style: |
                      #                   ha-card {
                      #                     margin-right: 5px;
                      #                     margin-bottom: 5px;
                      #                   }

          - type: vertical-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:atomic-calendar
                    entities:
                      - entity: calendar.family
                    dateSize: 110
                    titleSize: 120
                    style: |
                      ha-card {
                        font-family: 'Open Sans', sans-serif;
                        margin-bottom: 10px;
                        margin-right: 5px;
                        margin-top: 10px;
                      }
                  - type: custom:home-feed-card
                    title: Home Feed
                    show_empty: false
                    calendars:
                      - calendar.family
                    more_info_on_tap: true
                    entities:
                      - switch.espresso
                      - binary_sensor.158_motion_nursery
                      - binary_sensor.158_motion_livingroom
                      - binary_sensor.158_door_laundry
                      - binary_sensor.motion_sensor_158_kitchen
                      - binary_sensor.158_motion_bedroom
                      - binary_sensor.door_sensor_158_nursery_balcony
                      - binary_sensor.door_sensor_158_nursery
                      - binary_sensor.158_door_hallway_cupboard
                      - binary_sensor.xi_door_entrance
                      - binary_sensor.158_door_balcony
                      - climate.livingroom_ac
                      - light.balcony_ceiling
                      - light.bedroom
                      - light.bedroom_ceiling
                      - light.desk
                      - light.dining_lights
                      - light.gateway_light
                      - light.kitchen_lights
                      - light.led
                      - light.led_shelf
                      - light.lifx_hallway_1
                      - light.lifx_laundry
                      - light.living_ceiling_lights
                      - light.nursery_ceiling
                      - light.tv
                    style: |
                      ha-card {
                        margin-top: 10px;
                        overflow: hidden;
                        font-family: 'Open Sans', sans-serif;
                      }
                  
              
